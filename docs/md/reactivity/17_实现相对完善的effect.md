# 17_实现相对完善的effect

### 一、我们要优化哪些点？

在上篇[实现相对完善的reactive](https://github.com/iamzjt-front-end/zjt-mini-vue3/blob/main/docs/md/16_实现相对完善的reactive.md)后，那我们继续来实现相对完善的`effect`。

首先我们还是列举一些对`effect`的简单考虑：

- 嵌套`effect`的情况，应该如何处理？
- `分支切换`，也就是三元表达式，不同的分支执行不同的代码，这种就没问题吗？
- `prop++`的情况，既读又取导致无限递归，栈溢出的情况。

### 二、effect相关考虑完善

#### （一）嵌套effect问题

1. 单测用例

   ```js
   ```

2. 完善逻辑


3. 单测结果


#### （二）分支切换问题

1. 单测用例

   ```js
   ```

2. 完善逻辑


3. 单测结果


#### （三）多次监测问题

1. 单测用例

   ```js
   ```

2. 完善逻辑


3. 单测结果